@{
    ViewData["Title"] = "Заказы";
    var groupedOrders = Model.GroupBy(o => o.OrderId);
    int summ = 0;
}
@model List<Order>
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/OrderListStyle.css" />
<div class="main_order">
    <div class="main_name_order">
        <h1>Заказы</h1>
    </div>
    <div class="main_catalog_order">
        <div class="catalog_products_order">
            @if (groupedOrders.Any())
            {
            @foreach (var group in groupedOrders)
            {
                summ = 0;
                <div class="catalog_card_order">
                    <div class="card_main_name">
                        <h2>Заказ номер @group.Key</h2>
                    </div>
                    @foreach (var order in group)
                    {
                        
                        <div class="catalog_card">
                            <div style="margin-left:10px">
                                <div class="card_main_name_title">
                                    <h3>@order.Product.Name X @order.ProductCount</h3>
                                </div>
                                <div style="margin-bottom:3px;" class="card_main_cost">
                                    <h3>Цена: @(order.ProductCostAtTimeOrder * order.ProductCount)</h3>
                                    @{
                                            summ += order.ProductCostAtTimeOrder * order.ProductCount;
                                    }
                                </div>
                            </div>
                                
                        </div>
                    }
                    <h3 style="margin-top:10px; font-size:20px; margin-left:15px">Итоговая стоимость: @summ</h3>
                </div>
            }
            }
            else
            {
                <h2>Нет заказов</h2>
            }
        </div>
    </div>
</div>